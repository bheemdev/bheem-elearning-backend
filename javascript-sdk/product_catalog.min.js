"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_MaterialUI=MaterialUI,Button=_MaterialUI.Button,Card=_MaterialUI.Card,CardActions=_MaterialUI.CardActions,CardContent=_MaterialUI.CardContent,CardMedia=_MaterialUI.CardMedia,CssBaseline=_MaterialUI.CssBaseline,Grid=_MaterialUI.Grid,Typography=_MaterialUI.Typography,makeStyles=_MaterialUI.makeStyles,Container=_MaterialUI.Container,Fab=_MaterialUI.Fab,Badge=_MaterialUI.Badge,Snackbar=_MaterialUI.Snackbar,Alert=_MaterialUI.Alert,CardActionArea=_MaterialUI.CardActionArea,CircularProgress=_MaterialUI.CircularProgress,IconButton=_MaterialUI.IconButton,SvgIcon=_MaterialUI.SvgIcon,backendBaseUrl=TOKOONLINE_BASEURL,useStyles=makeStyles((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},fabCart:{display:"flex",alignItems:"center",justifyContent:"center"}}}));function App(){localStorage.getItem(TOKOONLINE_TOKOID)||localStorage.setItem(TOKOONLINE_TOKOID,""+(new Date).getTime());var e=useStyles(),t=React.useState({error:null,listData:null,pageCount:0,pageIndex:0,pageSize:0,count:0,isRequest:!0}),a=_slicedToArray(t,2),n=a[0],r=a[1],i=React.useState({error:null,isRequest:!1}),o=_slicedToArray(i,2),c=(o[0],o[1]),l=React.useCallback((function(e){var t='query{\n      getAllTokoProductsByTokoId(toko_id: "'+TOKOONLINE_TOKOID+'" ,page_size: 10, page_index: '+e+', string_to_search: ""){\n        error,\n        count,\n        page_count,\n        status,\n        list_data{\n          _id,\n          name,\n          price,\n          code,\n          description,\n          image_id{\n            _id,\n            filename,\n            file_type\n          }\n        }\n      }\n    }',a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})};fetch(backendBaseUrl+"/graphql",a).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.data.getAllTokoProductsByTokoId})).then((function(e){return r({listData:e.list_data,pageCount:e.page_count,count:e.count,isRequest:!1})}))}),[]),d=React.useState(!1),s=_slicedToArray(d,2),u=s[0],g=s[1],m=function(){g(!0)},p=(n.error,n.count,n.pageCount,n.isRequest,n.listData),_=(n.pageIndex,n.pageSize,React.useState(0)),f=_slicedToArray(_,2),y=f[0],I=f[1];React.useEffect((function(){l(y)}),[y]);var C=React.useState(0),h=_slicedToArray(C,2),R=h[0],T=(h[1],function(e){I(e?y+1:0===y?0:y-1)});return React.createElement("div",null,React.createElement(CssBaseline,null),n.isRequest?React.createElement(Grid,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},React.createElement(CircularProgress,null)):React.createElement(Container,{className:e.cardGrid,maxWidth:"md"},React.createElement(Grid,{container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},React.createElement(Badge,{onClick:function(){window.location.href=TOKOONLINE_PAGE_SHOPPING_CART},badgeContent:R,color:"secondary",style:{position:"fixed",zIndex:2}},React.createElement(IconButton,{edge:"end","aria-label":"delete",style:{marginTop:-2,marginRight:-5,backgroundColor:"#efefef"}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M10 19.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5zm3.5-1.5c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5c0-.828-.672-1.5-1.5-1.5zm1.336-5l1.977-7h-16.813l2.938 7h11.898zm4.969-10l-3.432 12h-12.597l.839 2h13.239l3.474-12h1.929l.743-2h-4.195z"}))))),React.createElement(Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:u,autoHideDuration:1e3,onClose:function(e,t){"clickaway"!==t&&g(!1)},message:"Berhasil ditambahkan"}),React.createElement(Grid,{container:!0,spacing:4,style:{marginTop:10}},(p||[]).map((function(t,a){return React.createElement(Grid,{item:!0,key:a,xs:12,sm:6,md:4},React.createElement(Card,{className:e.card},React.createElement(CardActionArea,{onClick:function(){window.location.href=TOKOONLINE_PAGE_PRODUCT_DETAIL+"#"+t.code}},React.createElement(CardMedia,{className:e.cardMedia,image:backendBaseUrl+"/renderfile/"+(t.image_id||{}).filename+"."+(t.image_id||{}).file_type,title:t.name}),React.createElement(CardContent,{className:e.cardContent},React.createElement(Typography,{gutterBottom:!0,variant:"h6",noWrap:!0},t.name),React.createElement(Typography,null,(n=t.price,"Rp. "+n.toString().split("").reverse().join("").match(/\d{1,3}/g).join(".").split("").reverse().join(""))))),React.createElement(CardActions,null,React.createElement(Button,{onClick:function(){var e,a,n,r;e={productId:""+t._id},a=e.productId,n='mutation{addToCart( toko_id: "'+TOKOONLINE_TOKOID+'", device_id: "xxxx", product_id: "'+a+'", session_id: "'+localStorage.getItem(TOKOONLINE_TOKOID)+'"){status,error,detail_data{_id,product_id{_id,name,\n                          code,\n                          price,\n                          description,\n                          image_id{\n                            _id,\n                            filename,\n                            file_type\n                          }\n                        }\n                        count,\n                        device_id,\n                        session_id,\n                        toko_id{\n                          slug\n                        }\n                      }\n                    }\n                    }',r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},fetch(backendBaseUrl+"/graphql",r).then((function(e){return e.json()})).then((function(e){return console.log("response===>",e),e.errors?alert(JSON.stringify(e.errors)):e.data.addToCart})).then((function(e){e&&(c({error:e.error,isRequest:!1}),e.error?alert(e.error):m())}))},size:"small",color:"primary"},"Add To Cart"))));var n}))),React.createElement(Grid,{container:!0,direction:"row",justify:"center",alignItems:"center"},React.createElement(IconButton,{onClick:function(){return T()},edge:"end","aria-label":"delete",style:{marginTop:20,marginRight:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12-12 5.373-12 12zm7.58 0l5.988-5.995 1.414 1.416-4.574 4.579 4.574 4.59-1.414 1.416-5.988-6.006z"}))),React.createElement("h4",{style:{marginTop:20,paddingTop:15}},y+1),React.createElement(IconButton,{onClick:function(){return T(!0)},edge:"end","aria-label":"delete",style:{marginTop:20,marginLeft:10}},React.createElement(SvgIcon,null,React.createElement("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.568 18.005l-1.414-1.415 4.574-4.59-4.574-4.579 1.414-1.416 5.988 5.995-5.988 6.005z"}))))))}ReactDOM.render(React.createElement(App,null),document.querySelector("#tokoonline_content"));